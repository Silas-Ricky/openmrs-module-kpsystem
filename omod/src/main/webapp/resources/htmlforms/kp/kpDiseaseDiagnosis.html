<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>


    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            jq("#NonePayingSex").hide();


            var male = $('#w11_0');
            var female = $('#w11_1');
            var transgender = $('#w11_2');
            $('input').on('click',function () {
                if (male.is(':checked')) {
                    jq("#year_sarted_sex").hide();
                    jq("#yearStartedSexWithMen").show();
                }
                if (female.is(':checked')) {
                    jq("#yearStartedSexWithMen").hide();
                    jq("#year_sarted_sex").show();
                }
                if(transgender.is(':checked')) {
                    jq("#year_sarted_sex").hide();
                    jq("#yearStartedSexWithMen").hide();
                }
            });





            $('input').on('click',function () {

                var year_startSex_work = getField('startSex.value').val();
                var year_start_having_sex_with_men = getField('sexWithMen.value').val();
                var year_stared_using_drugs = getField('usingDrugs.value').val();

                yearValidation(year_startSex_work, 'startSex')
                yearValidation(year_start_having_sex_with_men,  'sexWithMen')
                yearValidation(year_stared_using_drugs, 'usingDrugs')


            });

            function yearValidation(year, textfield) {

                if (year != 0) {
                    var test=year;
                    if (year.length != 4) {
                        getField(textfield+'.error').html('Please enter valid year.').show();
                        getField(textfield+'.value').val('');
                        return false;
                    }

                    var current_year = new Date().getFullYear();
                    if ((year > current_year)) {
                        getField(textfield+'.error').html('Year should not be greater than current year.').show();
                        getField(textfield+'.value').val('');
                        return false;
                    }
                    getField(textfield+'.error').html('Please enter valid year.').hide();
                }
            }
        });

        beforeSubmit.push(function() {
            var enrolment_area = getField('enrolment_area.value').val();




        });
    </script>


    <div class="ke-form-header">
        <table style="width: 100%">
            <tr>
                <td align="left">

                </td>
                <td align="right">Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">

        <fieldset>
            <legend>Disease Diagnosis Form</legend>

            <table>
                <tr>
                    <td>Have you ever been diagnosed with any past or current diseases ?</td>
                    <td align="right">
                        <obs id="past_or_current_diseases" conceptId="165018"
                             answerConceptIds="1065,1066"
                             answerLabels="Yes,No"
                             style="radio" />
                        &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
                    </td>
                    <td>

                    </td>
                    <td>

                    <td>If yes, Disease name  </td>
                    <td align="right">
                        <obs conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerClasses="Diagnosis" id="diagnosis-type" style="autocomplete"/>
                    </td>

                    </td>
                </tr>

                <table id="diseaseDetails" >

                        <tr>
                        <td>Nature Of the disease</td>
                            <td align="right">
                            <obs id="nature_of_disease" conceptId="1284"
                                 answerConceptIds="145439AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,149854AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabels="Chronic,Acute"
                                 style="radio" />
                        </td>

                    </tr>
                     <tr>
                        <td>Disease status</td>
                        <td align="right">
                            <obs id="disease_status" conceptId="165018"
                                 answerConceptIds="145439AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,149854AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                 answerLabels="Current,Past"
                                 style="radio" />
                        </td>
                     </tr>
                    <tr>
                        <td>If current, Specify start date</td>
                        <td align="right">
                            <encounterDate id="encounter-date" conceptId="1730AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" showTime="true"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Specify the treatment medication in use</td>
                        <td align="right">
                            <obs id="treatmentMedication" conceptId="159367AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                        </td>
                    </tr>
                </table>

            </table>
        </fieldset>

        <fieldset>
            <legend>Current Medication Form</legend>

            <table>
                <tr >
                    <td>Are you using any medication currently?</td>
                    <td>
                        <obs id="disease_status" conceptId="162736AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             answerConceptIds="1065,1066"
                             answerLabels="Yes,No"
                             style="radio" />
                    </td>
                </tr>
                <table id="medicationDetails" >
                    <tr>
                        <td>If yes, Specify the nature of the medication</td>
                        <td align="right">
                            <obs conceptId="165018" default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Specify the name of the medication</td>
                        <td>
                            <obs id="treatmentMedication" conceptId="1473"/>
                        </td>
                    </tr>
                    <tr>
                        <td>Medication start date</td>
                        <td align="right">
                            <encounterDate id="encounter-date" showTime="true"/>
                        </td>

                        <td>Medication duration</td>
                        <td>
                            <obs id="treatmentMedication" conceptId="1473"/>
                        </td>
                    </tr>
                </table>

            </table>
        </fieldset>


    </div>

    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>