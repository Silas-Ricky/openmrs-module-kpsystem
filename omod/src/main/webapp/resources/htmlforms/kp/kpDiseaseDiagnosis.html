<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>

    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            jq('#diagnosis-type input').prop("disabled", true);


            $('input').on('click',function () {
                var pastDiseaseYes = getValue("past_or_current_diseases.value");
                if (pastDiseaseYes == 1065 )
                {
                    jq('#diagnosis-type input').prop("disabled", false);
                    jq('#nature_of_disease input').prop("disabled", false);
                    jq('#disease_status input').prop("disabled", false);
                    jq('#expiry-date input').prop("disabled", false);
                    jq('#medication_in_use input').prop("disabled", false);




                }else{
                    jq('#diagnosis-type input').prop("disabled", true);
                    jq('#diagnosis-type input').val('');
                    jq('#nature_of_disease input').prop("disabled", true);
                    jq('#nature_of_disease input').val('');
                    jq('#disease_status input').prop("disabled", true);
                    jq('#disease_status input').val('');
                    jq('#expiry-date input').prop("disabled", true);
                    jq('#expiry-date input').val('');
                    jq('#medication_in_use input').prop("disabled", true);
                    jq('#medication_in_use input').val('');


                }

            });
        });

        beforeSubmit.push(function() {

            var diagnosedPastDisease = getValue("past_or_current_diseases.value");
            var diagnosis = getField('diagnosis-type.value').val();
            var nature_of_disease = getValue("nature_of_disease.value");
            if(diagnosedPastDisease == 1066){

                return false;
            }
            if ((diagnosedPastDisease == 1065 )&amp;&amp;(diagnosis==""))
            {
                getField('diagnosis-type.error').html('Required.').show();
                return false;
            }
            else {
                getField('diagnosis-type.error').html('Required.').hide();
            }

            if ((diagnosedPastDisease == 1065 )&amp;&amp;(nature_of_disease==false)) {
                getField('nature_of_disease.error').html('Required.').show();
                return false;

            } else {
                getField('nature_of_disease.error').html('Required.').hide();
            }
        });
    </script>


    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Date:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td>Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>

    <div class="ke-form-content">

        <fieldset>
            <legend>Disease Diagnosis Form</legend>

            <table border="0" width="100%" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="156" valign="top"><p>Have you ever been diagnosed with any past or current diseases?</p></td>
                    <td width="156" valign="top"><p>  <obs id="past_or_current_diseases" name="pastCurrentDisease" conceptId="165018"
                                                           answerConceptIds="1065,1066"
                                                           answerLabels="Yes,No"
                                                           style="radio" /></p></td>
                    <td width="156" valign="top"><p>If yes, Disease name</p></td>
                    <td width="156" valign="top"><p><obs  conceptId="1284AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerClasses="Diagnosis" id="diagnosis-type" style="autocomplete"/></p></td>
                </tr>
                <tr>
                    <td width="156" valign="top"><p>Nature Of the disease</p></td>
                    <td width="156" valign="top"><p>  <obs id="nature_of_disease" conceptId="1284"
                                                           answerConceptIds="145439AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,149854AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                           answerLabels="Chronic,Acute"
                                                           style="radio" /></p></td>
                    <td width="156" valign="top"><p>Disease status</p></td>
                    <td width="156" valign="top"><p>  <obs id="disease_status" conceptId="165018"
                                                           answerConceptIds="145439AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,149854AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                                                           answerLabels="Current,Past"
                                                           style="radio" /></p></td>
                </tr>
                <tr>
                    <td width="156" valign="top"><p>If current, Specify start date</p></td>
                    <td width="156" valign="top"><p> <obs id="expiry-date" conceptId="162502AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="true"
                    /></p></td>
                    <td width="156" valign="top"><p>Specify the treatment medication in use</p></td>

                    <td width="156" valign="top"><p>  <obs class="remarks" id="medication_in_use" conceptId="160632AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"

                    /></p></td>

                </tr>
            </table>
        </fieldset>




    </div>

    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>